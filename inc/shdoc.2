# shd_each

# To complete the picture, here is *shd_each*.  It's notable in that it
# insists on being called by *shdoc*.
# [[file:~/Dropbox/commonplace/software/shreadme.org::*shd_each][shd_each:1]]
shd_each () 
{ 
    report_notfunction $1 && return 1;
    report_notcalledby shdoc && return 2;
    trace_call $*;
    echo "function ${1}_doc {";
    declare -f $1 | awk '
       NR > 2 {
                if ( $1 !~ /^:/ ) exit
                else              print
              }
        ';
    echo "}"
}
shd_trim () 
{ 
    report_notfunction $1 && return 1;
    trace_call $*;
    declare -f $1 | awk ' $1 !~ /^:$/'
}
# shd_each:1 ends here
